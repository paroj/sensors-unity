name: sensors-unity
version: "18.02"
confinement: strict
grade: stable
summary: A simple sensors GUI for the Unity Desktop
description:  Allows monitoring the output of the `sensors` command graphically.
base: core18

apps:
  sensors-unity:
    command: desktop-launch $SNAP/share/sensors-unity/sensors-gui.py
    plugs: [unity7, home, hardware-observe]

plugs:
  gtk-3-themes:
    interface: content
    target: $SNAP/data-dir/themes
    default-provider: gtk-common-themes
  icon-themes:
    interface: content
    target: $SNAP/data-dir/icons
    default-provider: gtk-common-themes
  sound-themes:
    interface: content
    target: $SNAP/data-dir/sounds
    default-provider: gtk-common-themes

slots:
  # for GtkApplication registration
  sensors-gui:
    interface: dbus
    bus: session
    name: net.rojtberg.sensors-gui

parts:
    desktop-gtk3:
      source: https://github.com/ubuntu/snapcraft-desktop-helpers.git
      source-subdir: gtk
      plugin: make
      make-parameters: ["FLAVOR=gtk3"]
      build-packages:
        - build-essential
        - libgtk-3-dev
      stage-packages:
        - libxkbcommon0  # XKB_CONFIG_ROOT
        - ttf-ubuntu-font-family
        - dmz-cursor-theme
        - light-themes
        - adwaita-icon-theme
        - gnome-themes-standard
        - shared-mime-info
        - libgtk-3-0
        - libgdk-pixbuf2.0-0
        - libglib2.0-bin
        - libgtk-3-bin
        - unity-gtk3-module
        - libappindicator3-1
        - locales-all
        - xdg-user-dirs
        - ibus-gtk3
        - libibus-1.0-5
    sensors-unity:
        plugin: python
        source: git://git.launchpad.net/sensors-unity
        stage-packages:
            - python3-distutils-extra
            - python3-gi
            - gir1.2-unity-5.0
            - gir1.2-gtk-3.0
            - gir1.2-pango-1.0
            - libsensors4
        after: [desktop-gtk3]
        stage:
            - -usr/share/pkgconfig # also in desktop-gtk3
            - -usr/share/mime      # also in desktop-gtk3
